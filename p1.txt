COPY START 2000
FIRST STORL RETADR
CLOOP JUMPSUB RDREC
## LOADA LENGTH
## COMPI ZERO
## LOOPEQ ENDFIL
## JUMPSUB WRREC
## JUMPA CLOOP
ENDFIL LOADA EOF
## STORA BUFFER
## LOADA THREE
## STORA LENGTH
## JUMPSUB WRREC
## GETRA RETADR
## RSUB
EOF CHAR EOF
THREE WORD 3
ZERO WORD 0
RETADR RESW 1
LENGTH RESW 1
BUFFER RESB 4096
RDREC LOADINDEX ZERO
## LOADA ZERO
RLOOP TESTOPD INPUT
## LOOPEQ RLOOP
## READCHAR INPUT
## COMPI ZERO
## LOOPEQ EXIT
## STORCH BUFFER
## INDEXA MAXLEN
## LOOPLESS RLOOP
EXIT STORX LENGTH
## RSUB
INPUT HEX F1
MAXLEN WORD 4096
WRREC LOADINDEX ZERO
WLOOP TESTOPD OUTPUT
## LOOPEQ WLOOP
## LOADC BUFFER
## WRITECHAR OUTPUT
## INDEXA LENGTH
## LOOPLESS WLOOP
## RSUB
OUTPUT HEX 06
## END COPY
